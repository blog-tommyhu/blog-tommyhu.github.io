<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/icon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/icon.png">
  <link rel="mask-icon" href="/images/icon.png" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog-tommyhu.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":true,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Similar to GitHub, Bitbucket makes it very easy to host your code. We all know that GitHub works great for open-source. However, you have to pay if you want to create private repositories. On the othe">
<meta property="og:type" content="article">
<meta property="og:title" content="Host code via Bitbucket">
<meta property="og:url" content="https://blog-tommyhu.github.io/2013/01/22/Host-code-via-Bitbucket/index.html">
<meta property="og:site_name" content="Yongtao Hu&#39;s blog">
<meta property="og:description" content="Similar to GitHub, Bitbucket makes it very easy to host your code. We all know that GitHub works great for open-source. However, you have to pay if you want to create private repositories. On the othe">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2013-01-22T06:43:21.000Z">
<meta property="article:modified_time" content="2021-08-12T10:23:13.145Z">
<meta property="article:author" content="Yongtao Hu">
<meta property="article:tag" content="coding">
<meta property="article:tag" content="bitbucket">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://blog-tommyhu.github.io/2013/01/22/Host-code-via-Bitbucket/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>Host code via Bitbucket | Yongtao Hu's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Yongtao Hu's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="reading-progress-bar"></div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://blog-tommyhu.github.io/2013/01/22/Host-code-via-Bitbucket/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/icon.png">
      <meta itemprop="name" content="Yongtao Hu">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Yongtao Hu's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Host code via Bitbucket
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2013-01-22 14:43:21" itemprop="dateCreated datePublished" datetime="2013-01-22T14:43:21+08:00">2013-01-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-08-12 18:23:13" itemprop="dateModified" datetime="2021-08-12T18:23:13+08:00">2021-08-12</time>
              </span>

          
            <span class="post-meta-item" title="Views" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span id="busuanzi_value_page_pv"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Disqus: </span>
    
    <a title="disqus" href="/2013/01/22/Host-code-via-Bitbucket/#disqus_thread" itemprop="discussionUrl">
      <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2013/01/22/Host-code-via-Bitbucket/" itemprop="commentCount"></span>
    </a>
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>Similar to <a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>, <a href="https://bitbucket.org/" target="_blank" rel="noopener">Bitbucket</a> makes it very easy to host your code. We all know that GitHub works great for open-source. However, you have to pay if you want to create private repositories. On the other hand, Bitbucket enables you to create unlimited free private repositories. This is an important reason why more and more people are using Bitbucket nowadays. In this post, I will show how to use Bitbucket to easily host your code (over <a href="http://tortoisehg.bitbucket.org/" target="_blank" rel="noopener">TortoiseHg</a> specifically).</p>
<a id="more"></a>
<h2 id="Setup-Bitbucket-over-Internet"><a href="#Setup-Bitbucket-over-Internet" class="headerlink" title="Setup Bitbucket over Internet"></a>Setup Bitbucket over Internet</h2><ol>
<li>Login <code>Bitbucket &gt; Repositories &gt; Create repository</code>.</li>
<li>In the Create a new repository page:<ul>
<li><strong>Name</strong>: Fill in the repository name (<code>testRepo</code> as an example).</li>
<li><strong>Description</strong>: I will always leave this empty because I prefer to use a <code>README.text</code> file instead, which supports <a href="http://pypi.python.org/pypi/Markdown" target="_blank" rel="noopener">Python-Markdown</a> and is much more powerful.</li>
<li>…</li>
</ul>
</li>
</ol>
<h2 id="Setup-TortoiseHg"><a href="#Setup-TortoiseHg" class="headerlink" title="Setup TortoiseHg"></a>Setup TortoiseHg</h2><p>Simple way is to use <strong>SSH keys</strong> and follow setup sets by this post: <a href="https://codebeamer.com/cb/wiki/32044#section-Windows" target="_blank" rel="noopener">Set up SSH for Mercurial</a>. One key step is to add the following content to <code>mercurial.ini</code> (TortoiseHg’s global setting file):</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[ui]</span></span><br><span class="line"><span class="attr">username</span> = -name-you-want-to-show- &lt;-email-@xxmail.com&gt;</span><br><span class="line"><span class="attr">ssh</span> = <span class="string">"C:\Program Files\TortoiseHg\TortoisePlink.exe"</span> -ssh -<span class="number">2</span> -batch -C</span><br></pre></td></tr></table></figure>
<p>Another key step is to generate your private SSH key file using <a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" target="_blank" rel="noopener">PuTTYGen</a> and copy the key to your online Bitbucket profile.</p>
<p>Note:</p>
<ol>
<li>Make sure <code>Pageant.exe</code> is running in background in order to make it work (<code>Add key &gt; load &gt;</code> input passphrase).</li>
<li><p>It’s possible to make <code>Pageant.exe</code> automatically load keys on system startup, see <a href="http://blog.shvetsov.com/2010/03/making-pageant-automatically-load-keys.html" target="_blank" rel="noopener">this post</a>. Key step is add a shortcut of <code>Pageant.exe</code> to PC’s <code>Startup</code> folder and change its <code>Target</code> to be something like:</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">"C:\Program Files\TortoiseHg\Pageant.exe" "-path-of-your-ssh-key-file-.ppk"</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="Commit-your-code-using-TortoiseHg"><a href="#Commit-your-code-using-TortoiseHg" class="headerlink" title="Commit your code using TortoiseHg"></a>Commit your code using TortoiseHg</h2><ol>
<li><code>File &gt; New Repository &gt;</code> Change <code>Destination path</code> to where your code is <code>&gt; Create</code>.</li>
<li>Click <code>Commit</code> button in toolbar. It will list all the modified (including edit/add/delete…) files in the left window. Note, click <code>Refresh current repository</code> button in toolbar when needed if you cannot see the new updated files. Check the files that we want to check in. And you can right click &gt; <code>Ignore</code> to ignores files to check in.</li>
<li>Fill in some commit update information in the right window and then click <code>Commit</code>.</li>
<li>Click <code>Push outgoing changes to selected URL</code> button in toolbar.</li>
<li>In <code>Remote Repository &gt;</code> Select <code>https</code> &gt;<code>Add the URL of the repo</code>testRepo<code>&gt; Click</code>save` button in just this left to remember this URL so that you have no need to type again when doing further commit this repo to this URL.</li>
</ol>
<p>Note: all you need to do is to loop in step 2~5 for further commits.</p>
<h2 id="Sync-between-multiple-users-PCs"><a href="#Sync-between-multiple-users-PCs" class="headerlink" title="Sync between multiple users/PCs"></a>Sync between multiple users/PCs</h2><ol>
<li><strong>Get latest</strong>: Before editing, always get current latest version by <code>Repository &gt; Synchronize &gt; Pull</code>.</li>
<li><strong>Update local to latest</strong>:  Right click current local version &gt; <code>Update</code> &gt; Write the latest revision in <code>Update to &gt; Update</code>.</li>
<li><strong>Edit source</strong>.</li>
<li><strong>Push</strong>: <code>Commit &gt; Push outgoing changes to selected URL</code>.<br>Done if no conflict found with server version (e.g. no one pushed new revisions during our editing). If do find conflict, it will shows <code>abort: push creates new remote head xxxxxxx!</code> in TortoiseHg.</li>
<li><strong>Resolve conflicts</strong>:<ul>
<li>Get latest: <code>Repository &gt; Synchronize &gt; Pull</code>.</li>
<li>Merge: Right click latest revision by others that is just pulled <code>&gt; Merge with Local… &gt; Next &gt;</code> Click <code>resolved</code> in current Merge window to resolve conflicts &gt; Click the file (do this one by one) that we need to resolve in <code>Unresolved conflicts</code> sub-window and click <code>Tool Resolve</code> (assume <code>KDiff3</code> has been installed, this will call KDiff3 to compare both versions side by side) &gt; In the <code>Output</code> window, right click <code>?&lt;Merge Conflick&gt; &gt; Select Line(s) from</code> the version that you want (or both versions) <code>&gt; Save</code> and <code>Close</code> KDiff3 &gt; <code>Close</code> the Resolve Conflicts window &gt; Change Commit message if you need in the <code>Merge</code> window <code>&gt; Commit Now &gt; Finish</code>.</li>
</ul>
</li>
<li><strong>Push</strong>: Push outgoing changes to selected URL.</li>
</ol>
<h2 id="Other-remarks"><a href="#Other-remarks" class="headerlink" title="Other remarks"></a>Other remarks</h2><h3 id="Repo-grouping"><a href="#Repo-grouping" class="headerlink" title="Repo grouping"></a>Repo grouping</h3><p>Use <em>teams</em> to group repos (only way currently). Issues can also be import/export in <code>Settings-&gt;Import &amp; export-&gt;…</code></p>
<h3 id="Get-some-specific-version"><a href="#Get-some-specific-version" class="headerlink" title="Get some specific version"></a>Get some specific version</h3><ul>
<li><p>If there is no corresponding repo in your PC:</p>
<ol>
<li>Clone the repo to PC (done in TortoiseHg).</li>
<li>Open it by TortoiseHg. Then all its revisions will show in the right view.</li>
<li><p>Select the revision you want to get &gt; Right click &gt; <code>Export &gt; Archive</code> &gt; Choose the <code>Destination path &gt; Archive</code>.</p>
<blockquote>
<p>Clone vs. Archive:</p>
<ul>
<li>Clone will copy everything including <code>.hg</code> folder (can be opened by TortoiseHg).</li>
<li>Archive will copy everything except .hg folder (can NOT be opened by TortoiseHg).</li>
</ul>
</blockquote>
</li>
</ol>
</li>
<li><p>Otherwise:</p>
<ul>
<li>Select current revision &gt; Right click &gt; <code>Update…</code> &gt; Put the revision you want to get in the <code>Update to</code> box &gt; <code>Update</code>.</li>
</ul>
</li>
</ul>
<h3 id="Link-to-most-recent-version-of-given-file1"><a href="#Link-to-most-recent-version-of-given-file1" class="headerlink" title="Link to most-recent version of given file1"></a>Link to most-recent version of given file<sup><a href="#fn_1" id="reffn_1">1</a></sup></h3><ol>
<li>Get the file link of any version, e.g. <a href="https://bitbucket.org/herohuyongtao/files/src/f7b75d07772182019e80200a18e5f1130f75fc70/files/VC_call_MATLAB.cpp?at=default" target="_blank" rel="noopener">https://bitbucket.org/herohuyongtao/files/src/f7b75d07772182019e80200a18e5f1130f75fc70/files/VC_call_MATLAB.cpp?at=default</a></li>
<li><p>Change string corresponding to version (<code>f7b75d07772182019e80200a18e5f1130f75fc70</code> in above example) to <code>tip</code> or <code>default</code> (or any other branch name) and delete the tail until to the file type, i.e. to be   <a href="https://bitbucket.org/herohuyongtao/files/src/tip/files/VC_call_MATLAB.cpp" target="_blank" rel="noopener">https://bitbucket.org/herohuyongtao/files/src/tip/files/VC_call_MATLAB.cpp</a> or <a href="https://bitbucket.org/herohuyongtao/files/src/default/files/VC_call_MATLAB.cpp" target="_blank" rel="noopener">https://bitbucket.org/herohuyongtao/files/src/default/files/VC_call_MATLAB.cpp</a>.</p>
<blockquote>
<p>The difference between <code>tip</code> and <code>default</code> is that using <code>tip</code> for the very latest commit, regardless of branch. Instead, <code>default</code> or any other branch would link to the latest version under that branch.</p>
</blockquote>
</li>
</ol>
<h3 id="Delete-local-commits"><a href="#Delete-local-commits" class="headerlink" title="Delete local commits"></a>Delete local commits</h3><ul>
<li>If only need to delete last commit, <code>Repository &gt; Rollback/Undo...</code>. This will keep changes in local.</li>
<li><p>If want to delete all local commits<sup><a href="#fn_2" id="reffn_2">2</a></sup><sup>,</sup><sup><a href="#fn_6" id="reffn_6">6</a></sup> (this will also revert all changes):</p>
<ol>
<li><p>Enable <code>mq</code> extension by adding the following to <code>mercurial.ini</code> or enable it via <code>File &gt; Settings &gt; Extensions &gt; mq</code>:</p>
 <figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[extensions]</span></span><br><span class="line"><span class="attr">mq</span>=</span><br></pre></td></tr></table></figure></li>
<li>Run <code>hg strip &#39;roots(outgoing())&#39;</code> in console.<blockquote>
<p>Note: it seems that this doesn’t work for <code>graft</code> commits, in this case, just use <code>hg strip #changeset#</code>.</p>
</blockquote>
</li>
</ol>
</li>
</ul>
<h3 id="Copy-changes-from-other-commits"><a href="#Copy-changes-from-other-commits" class="headerlink" title="Copy changes from other commits"></a>Copy changes from other commits</h3><p>This can be viewed as one kind of merging except that all files are updated to other commits. This is very useful when you want to update old <code>default</code> branch to one new <code>branch</code>.</p>
<p>This can be done in the following steps<sup><a href="#fn_5" id="reffn_5">5</a></sup>:</p>
<ol>
<li>Set the current commit to which you want to be overwritten by other commits by right click \(\rightarrow\) <code>Update...</code> \(\rightarrow\) set the commit number.</li>
<li>Select the commit that you want to copy changes from \(\rightarrow\) right click \(\rightarrow\) <code>Graft to Local...</code>.</li>
</ol>
<h3 id="Ignore-given-files-folders"><a href="#Ignore-given-files-folders" class="headerlink" title="Ignore given files/folders"></a>Ignore given files/folders</h3><ul>
<li>Ignore all its content under folder, simply add <code>-path-to-folder-/folderName/</code> to file <code>.hgignore</code>.</li>
<li><p>Ignore all its content under folder except given files or given sub-folders, add similar conent to file <code>.hgignore</code> (note that, unlike folders, files should end with <code>$</code>):</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">syntax: regexp</span><br><span class="line">-path-to-folder-/folderName/(?!exceptFile1.ext1$|exceptFile2.ext2$|exceptSubFolder1|exceptSubFolder2|)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Sub-repos"><a href="#Sub-repos" class="headerlink" title="Sub-repos"></a>Sub-repos</h3><p>Subrepositories allow you to have a standalone repository included within a parent repository<sup><a href="#fn_3" id="reffn_3">3</a></sup> (<a href="https://bitbucket.org/xixs/public" target="_blank" rel="noopener">hg example</a> / <a href="https://github.com/willyd/caffe-windows-dependencies" target="_blank" rel="noopener">git example</a>).</p>
<ol>
<li>In the main repo, create file <code>.hgsub</code>.</li>
<li><p>Add sub-repo mapping info in file <code>.hgsub</code> with format: <code>local_subrepo_path = external_repo_path</code> (where <code>local_subrepo_path</code> is relative to the root of your main repo). Suppose we want to add repo hosted at <code>https://me@bitbucket.org/me/subrepo</code> to folder <code>-path-to-main-repo-path-/libs/subrepo</code>, the content of file <code>.hgsub</code> will be like:</p>
 <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">libs/subrepo = https://me@bitbucket.org/me/subrepo</span><br></pre></td></tr></table></figure></li>
<li>Add and commit file <code>.hgsub</code> to the main repo. File structure identified by <code>local_subrepo_path</code> will be created. E.g. in above example, folder <code>libs/subrepo</code> will be created automatically.</li>
</ol>
<blockquote>
<p>Note: You must revert anything done to the sub-repo when pushing changes to the main repo, though you can modify it to fit your needs during development.</p>
</blockquote>
<p>Note that, when cloning the main repo, by default, all sub-repos (and their contents) are also cloned. If you only want to download some of the sub-repos (especially useful if the sub-repos are huge in terms of number and size), follow the following steps:</p>
<ol>
<li>Download the main repo from its download page.</li>
<li>In TortoiseHg \(\rightarrow\) <code>File</code> \(\rightarrow\) <code>New Repository...</code> \(\rightarrow\) browse to the download main folder \(\rightarrow\) <code>Create</code>.</li>
<li>Check on all files to commit (may need to press commit button twice).</li>
<li><p>Download sub-repos.</p>
<ul>
<li>One-by-one:<ul>
<li>In <code>Repository Registry</code> window \(\rightarrow\) click the main repo to expand all its sub-repos \(\rightarrow\) double click the sub-repo needed to download \(\rightarrow\) click <code>Pull</code> button.</li>
</ul>
</li>
<li><p>Batch style:</p>
<ol>
<li>Download file <a href="https://www.dropbox.com/s/zsx5av6mjeux47b/onsub.py" target="_blank" rel="noopener"><code>onsub.py</code></a> and put anywhere on your PC.</li>
<li><p>In TortoiseHg \(\rightarrow\) right click the main repo \(\rightarrow\) on the main repo’s repository setting window \(\rightarrow\) click <code>Edit File</code> \(\rightarrow\) add the following content to the opened file (i.e. <code>hgrc</code> file) and <code>Save</code>.</p>
 <figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[extensions]</span></span><br><span class="line"><span class="attr">onsub</span> = -path-to-<span class="literal">on</span>sub.py-/<span class="literal">on</span>sub.py</span><br></pre></td></tr></table></figure></li>
<li>Edit both files <code>.hgsub</code> and <code>.hgsubstate</code> to keep only the lines for the sub-repos that you want to download.</li>
<li>Run <code>hg onsub &quot;hg pull -u&quot;</code> in console<sup><a href="#fn_4" id="reffn_4">4</a></sup>.</li>
<li><em>(optional)</em> If you want to download given commit of one sub-repo, after the above steps, go to the sub-repo that you want to edit and update to the commit you want.</li>
</ol>
</li>
</ul>
</li>
</ol>
<hr>
<blockquote id="fn_1">
<sup>1</sup>. Link to most-recent version of static file: <a href="https://bitbucket.org/site/master/issue/3769/link-to-most-recent-version-of-static-file" target="_blank" rel="noopener">https://bitbucket.org/site/master/issue/3769/link-to-most-recent-version-of-static-file</a>.<a href="#reffn_1" title="Jump back to footnote [1] in the text."> &#8617;</a>
</blockquote>
<blockquote id="fn_2">
<sup>2</sup>. Delete all local changesets and revert to tree: <a href="http://stackoverflow.com/a/2143711/2589776" target="_blank" rel="noopener">http://stackoverflow.com/a/2143711/2589776</a>.<a href="#reffn_2" title="Jump back to footnote [2] in the text."> &#8617;</a>
</blockquote>
<blockquote id="fn_3">
<sup>3</sup>. Getting Started With Mercurial Subrepositories: <a href="https://tomtech999.wordpress.com/2011/12/17/getting-started-with-mercurial-subrepositories/" target="_blank" rel="noopener">https://tomtech999.wordpress.com/2011/12/17/getting-started-with-mercurial-subrepositories/</a>.<a href="#reffn_3" title="Jump back to footnote [3] in the text."> &#8617;</a>
</blockquote>
<blockquote id="fn_4">
<sup>4</sup>. OnsubExtension: <a href="https://www.mercurial-scm.org/wiki/OnsubExtension" target="_blank" rel="noopener">https://www.mercurial-scm.org/wiki/OnsubExtension</a>.<a href="#reffn_4" title="Jump back to footnote [4] in the text."> &#8617;</a>
</blockquote>
<blockquote id="fn_5">
<sup>5</sup>. Copy changes from other branches onto the current branch: <a href="https://selenic.com/hg/help/graft" target="_blank" rel="noopener">https://selenic.com/hg/help/graft</a>.<a href="#reffn_5" title="Jump back to footnote [5] in the text."> &#8617;</a>
</blockquote>
<blockquote id="fn_6">
<sup>6</sup>. Is there any way to delete local commits in Mercurial?: <a href="http://stackoverflow.com/questions/2338986/is-there-any-way-to-delete-local-commits-in-mercurial" target="_blank" rel="noopener">http://stackoverflow.com/questions/2338986/is-there-any-way-to-delete-local-commits-in-mercurial</a><a href="#reffn_6" title="Jump back to footnote [6] in the text."> &#8617;</a>
</blockquote>

    </div>

    
    
    

      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/coding/" rel="tag"><i class="fa fa-tag"></i> coding</a>
              <a href="/tags/bitbucket/" rel="tag"><i class="fa fa-tag"></i> bitbucket</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2013/01/21/Character-encodings-of-text-files/" rel="prev" title="Character encodings of text files">
      <i class="fa fa-chevron-left"></i> Character encodings of text files
    </a></div>
      <div class="post-nav-item">
    <a href="/2013/05/24/Good-PC-tools/" rel="next" title="Good PC tools">
      Good PC tools <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    
  <div class="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
  </div>
  

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Setup-Bitbucket-over-Internet"><span class="nav-number">1.</span> <span class="nav-text">Setup Bitbucket over Internet</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Setup-TortoiseHg"><span class="nav-number">2.</span> <span class="nav-text">Setup TortoiseHg</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Commit-your-code-using-TortoiseHg"><span class="nav-number">3.</span> <span class="nav-text">Commit your code using TortoiseHg</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Sync-between-multiple-users-PCs"><span class="nav-number">4.</span> <span class="nav-text">Sync between multiple users&#x2F;PCs</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Other-remarks"><span class="nav-number">5.</span> <span class="nav-text">Other remarks</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Repo-grouping"><span class="nav-number">5.1.</span> <span class="nav-text">Repo grouping</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Get-some-specific-version"><span class="nav-number">5.2.</span> <span class="nav-text">Get some specific version</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Link-to-most-recent-version-of-given-file1"><span class="nav-number">5.3.</span> <span class="nav-text">Link to most-recent version of given file1</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Delete-local-commits"><span class="nav-number">5.4.</span> <span class="nav-text">Delete local commits</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Copy-changes-from-other-commits"><span class="nav-number">5.5.</span> <span class="nav-text">Copy changes from other commits</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Ignore-given-files-folders"><span class="nav-number">5.6.</span> <span class="nav-text">Ignore given files&#x2F;folders</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sub-repos"><span class="nav-number">5.7.</span> <span class="nav-text">Sub-repos</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Yongtao Hu"
      src="/images/icon.png">
  <p class="site-author-name" itemprop="name">Yongtao Hu</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">29</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Yongtao Hu</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

  

<script>
  function loadCount() {
    var d = document, s = d.createElement('script');
    s.src = 'https://blog-tommyhu.disqus.com/count.js';
    s.id = 'dsq-count-scr';
    (d.head || d.body).appendChild(s);
  }
  // defer loading until the whole page loading is completed
  window.addEventListener('load', loadCount, false);
</script>
<script>
  var disqus_config = function() {
    this.page.url = "https://blog-tommyhu.github.io/2013/01/22/Host-code-via-Bitbucket/";
    this.page.identifier = "2013/01/22/Host-code-via-Bitbucket/";
    this.page.title = "Host code via Bitbucket";
    };
  NexT.utils.loadComments(document.querySelector('#disqus_thread'), () => {
    if (window.DISQUS) {
      DISQUS.reset({
        reload: true,
        config: disqus_config
      });
    } else {
      var d = document, s = d.createElement('script');
      s.src = 'https://blog-tommyhu.disqus.com/embed.js';
      s.setAttribute('data-timestamp', '' + +new Date());
      (d.head || d.body).appendChild(s);
    }
  });
</script>

</body>
</html>
